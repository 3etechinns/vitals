<div ng-include="'app/views/partials/header.html'"></div>

<div class="container main-container">
	<div class="no-data-container col-md-8 col-md-offset-2 well" ng-hide="readings && readings.length > 0">
		<h1 class="text-center">This patient has no vital information yet.</h1>
		<button class="btn btn-primary center-block" data-toggle="modal" data-target="#reading-modal"><span class="glyphicon glyphicon-plus"></span> Add Vitals</button>
	</div>
	
	<div class="stats-container" ng-show="readings && readings.length > 0">
		<div class="row stat-row header-row">
			<div class="column stat-axis header-interactive">
				<div class="dropdown">
					<button class="btn btn-default dropdown-toggle" type="button" id="time-dropdown" data-toggle="dropdown">
						<i class="glyphicon glyphicon-calendar"></i>
					</button>
					<ul class="dropdown-menu" role="menu" aria-labelledby="time-dropdown">
						<li role="presentation"><a role="menuitem" href="" tabindex="-1" ng-click="setDateFilterDays(1)">Last 24 Hours</a></li>
						<li role="presentation"><a role="menuitem" href="" tabindex="-1" ng-click="setDateFilterDays(7)">Last Week</a></li>
						<li role="presentation"><a role="menuitem" href="" tabindex="-1" ng-click="setDateFilterDays(30)">Last 30 Days</a></li>
						<li role="presentation"><a role="menuitem" href="" tabindex="-1" ng-click="setDateFilterDays(365)">Last Year</a></li>
						<li role="presentation"><a role="menuitem" href="" tabindex="-1" ng-click="setDateFilterDays()">All Time</a></li>
					</ul>
				</div>
			</div>
			<div class="column stat-chart">
				<span class="start-date">{{readings[0].timestamp | date }}</span>
				<span class="end-date">{{readings[readings.length - 1].timestamp | date }}</span>
			</div>
			<div class="column stat-reading header-interactive">{{selectedReading.timestamp | date:'short' }}</div>
		</div>
		<div class="row stat-row">
			<div class="column stat-axis">
				<p class="stat-label stat-label-header text-center">100</p>
				<p class="stat-label stat-label-footer text-center">40</p>
			</div>
			<div class="column stat-chart c3-chart"
				 ng-model="readings"
				 data-property="pulse_bpm"
				 data-on-selected="setSelectedReading(data)"
				 data-y-axis-min="40.0"
				 data-y-axis-max="100.0">
			</div>
			<div class="column stat-reading">
				<p class="stat-label stat-label-header text-center">Pulse</p>
				<h2 class="text-center">{{selectedReading.pulse_bpm}}</h2>
				<p class="stat-label stat-label-footer text-center">BPM</p>
			</div>
		</div>

		<div class="row stat-row">
			<div class="column stat-axis">
				<p class="stat-label stat-label-header text-center">105</p>
				<p class="stat-label stat-label-footer text-center">95</p>
			</div>
			<div class="column stat-chart c3-chart"
				 ng-model="readings"
				 data-property="temperature_degf"
				 data-on-selected="setSelectedReading(data)"
				 data-y-axis-min="95.0"
				 data-y-axis-max="105.0">
			</div>
			<div class="column stat-reading">
				<p class="stat-label stat-label-header text-center">Temperature</p>
				<h2 class="text-center">{{selectedReading.temperature_degf}}</h2>
				<p class="stat-label stat-label-footer text-center">&deg;F</p>
			</div>
		</div>

		<div class="row stat-row">
			<div class="column stat-axis">
				<p class="stat-label stat-label-header text-center">160</p>
				<p class="stat-label stat-label-footer text-center">60</p>
			</div>
			<div class="column stat-chart c3-chart"
				 ng-model="readings"
				 data-property='["blood_pressure_sys", "blood_pressure_dia"]'
				 data-on-selected="setSelectedReading(data)"
				 data-y-axis-min="60.0"
				 data-y-axis-max="160.0">
			</div>
			<div class="column stat-reading">
				<p class="stat-label stat-label-header text-center">Blood Pressure</p>
				<h2 class="text-center blood-pressure">{{selectedReading.blood_pressure_sys}} / {{selectedReading.blood_pressure_dia}}</h2>
				<p class="stat-label stat-label-footer text-center">mm Hg</p>
			</div>
		</div>

		<div class="row stat-row">
			<div class="column stat-axis">
				<p class="stat-label stat-label-header text-center">30</p>
				<p class="stat-label stat-label-footer text-center">0</p>
			</div>
			<div class="column stat-chart c3-chart"
				 ng-model="readings"
				 data-property="respiratory_rate_rpm"
				 data-on-selected="setSelectedReading(data)"
				 data-y-axis-min="0.0"
				 data-y-axis-max="30.0">
			</div>
			<div class="column stat-reading">
				<p class="stat-label stat-label-header text-center">Respiratory Rate</p>
				<h2 class="text-center">{{selectedReading.respiratory_rate_rpm}}</h2>
				<p class="stat-label stat-label-footer text-center">RPM</p>
			</div>
		</div>
	</div>
</div>

<div ng-controller="ReadingEditCtrl" class="modal fade" id="reading-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="myModalLabel">Add Vitals for {{patient.name.first}} {{patient.name.last}}</h4>
			</div>
			<div class="modal-body form-horiontal">
				<form name="reading-form" role="form">
					<div class="form-group">
						<label for="form_pulse" class="col-xs-5 control-label">Pulse</label>
						<div class="col-xs-7 input-group">
							<input type="number" ng-model="reading.pulse_bpm" class="form-control" id="form_pulse" min="0">
							<span class="input-group-addon">BPM</span>
						</div>
					</div>
					<div class="form-group">
						<label for="form_temp" class="col-xs-5 control-label">Temperature</label>
						<div class="col-xs-7 input-group">
							<input type="number" ng-model="reading.temperature_degf" class="form-control" id="form_temp" min="0">
							<span class="input-group-addon">&deg;F</span>
						</div>
					</div>
					<div class="form-group">
						<label for="form_bp_sys" class="col-xs-5 control-label">Sys. Blood Pressure</label>
						<div class="col-xs-7 input-group">
							<input type="number" ng-model="reading.blood_pressure_sys" class="form-control" id="form_bp_sys" min="0">
							<span class="input-group-addon">mm Hg</span>
						</div>
					</div>
					<div class="form-group">
						<label for="form_bp_dia" class="col-xs-5 control-label">Dia. Blood Pressure</label>
						<div class="col-xs-7 input-group">
							<input type="number" ng-model="reading.blood_pressure_dia" class="form-control" id="form_bp_dia" min="0">
							<span class="input-group-addon">mm Hg</span>
						</div>
					</div>
					<div class="form-group">
						<label for="form_resp" class="col-xs-5 control-label">Respiratory Rate</label>
						<div class="col-xs-7 input-group">
							<input type="number" ng-model="reading.respiratory_rate_rpm" class="form-control" id="form_resp" min="0">
							<span class="input-group-addon">RPM</span>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
				<button type="button" ng-disabled="isInvalid()" class="btn btn-primary" ng-click="addReading(reading)" data-dismiss="modal">Add</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="table-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="myModalLabel">Vitals for {{patient.name.first}} {{patient.name.last}}</h4>
			</div>
			<div class="modal-body">
				<div class="table-responsive">
					<table class="table table-striped table-hover">
						<tr>
							<th>Date</th>
							<th class="text-center">Pulse</th>
							<th class="text-center">Temperature</th>
							<th class="text-center">Blood Pressure (Systolic)</th>
							<th class="text-center">Blood Pressure (Diastolic)</th>
							<th class="text-center">Respiratory Rate</th>
						</tr>
						<tr ng-repeat="reading in readings | orderBy:'timestamp':true">
							<th>{{reading.timestamp | date:'short'}}</th>
							<th class="text-center">{{reading.pulse_bpm}}</th>
							<th class="text-center">{{reading.temperature_degf}}</th>
							<th class="text-center">{{reading.blood_pressure_sys}}</th>
							<th class="text-center">{{reading.blood_pressure_dia}}</th>
							<th class="text-center">{{reading.respiratory_rate_rpm}}</th>
						</tr>
					</table>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!--
Temperature
data-regions='[{ "axis": "y", "end": 96, "class": "danger"}, {"axis": "y", "start": 96, "end": 97.8, "class": "warning" }, { "axis": "y", "start": 99, "end": 100, "class": "warning" }, { "axis": "y", "start": 100, "class": "danger" }]'

Respiratory Rate
data-regions='[{ "axis": "y", "end": 10, "class": "danger"}, {"axis": "y", "start": 10, "end": 12, "class": "warning" }, { "axis": "y", "start": 17, "end": 20, "class": "warning" }, { "axis": "y", "start": 20, "class": "danger" }]'

Pulse
data-regions='[{ "axis": "y", "end": 50, "class": "danger" }, {"axis": "y", "start": 50, "end": 60, "class": "warning" }, { "axis": "y", "start": 80, "end": 90, "class": "warning" }, { "axis": "y", "start": 90, "class": "danger" }]'
-->
